(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),a=document.getElementById("mute"),d=a.querySelector("i"),s=document.getElementById("volume"),l=document.getElementById("currentTime"),o=document.getElementById("totalTime"),u=document.getElementById("timeline"),m=document.getElementById("fullScreen"),i=m.querySelector("i"),c=document.getElementById("videoContainer"),r=document.getElementById("videoControls");let v=null,f=null,E=.5,y=E;e.volume=E;const L=e=>new Date(1e3*e).toISOString().substring(14,19),g=t=>{e.paused?e.play():e.pause(),n.classList=e.paused?"fas fa-play":"fas fa-pause"},p=t=>{e.muted?(e.muted=!1,E=y):e.muted=!0,d.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",s.value=e.muted?0:E},T=()=>{document.fullscreenElement?(document.exitFullscreen(),i.classList="fas fa-expand"):(c.requestFullscreen(),i.classList="fas fa-compress")},I=()=>r.classList.remove("showing");t.addEventListener("click",g),a.addEventListener("click",p),s.addEventListener("input",(t=>{const{target:{value:n}}=t;e.muted&&(e.muted=!1,d.classList="fas fa-volume-up"),0==n&&(e.muted=!0,d.classList="fas fa-volume-mute"),E=n,e.volume=n})),s.addEventListener("change",(t=>{const{target:{value:n}}=t;e.muted||(y=n)})),e.addEventListener("loadeddata",(()=>{o.innerText=L(Math.floor(e.duration)),u.max=Math.floor(e.duration)})),e.addEventListener("timeupdate",(()=>{l.innerText=L(Math.floor(e.currentTime)),u.value=Math.floor(e.currentTime)})),e.addEventListener("click",g),e.addEventListener("ended",(async()=>{const{id:e}=c.dataset;await fetch(`/api/videos/${e}/view`,{method:"POST"})})),c.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),f&&(clearTimeout(f),f=null),r.classList.add("showing"),f=setTimeout(I,2e3)})),c.addEventListener("mouseleave",(()=>{v=setTimeout(I,2e3)})),u.addEventListener("input",(t=>{const{target:{value:n}}=t;e.currentTime=n})),m.addEventListener("click",T),document.addEventListener("keydown",(e=>{const{key:t}=e;" "===t&&(console.log("space"),g()),"M"!==t&&"m"!==e.key||(console.log("M or m"),p()),"F"!==t&&"f"!==e.key||(console.log("F or f"),T())}))})();